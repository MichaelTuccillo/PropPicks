<mat-toolbar class="app-toolbar" color="transparent">
  <!-- Brand -->
  <a class="brand" (click)="goHome()" role="button">Mr. Prop Bot</a>

  <span class="spacer"></span>

  <!-- When signed in-->
  <ng-container *ngIf="auth.isAuthed(); else guest">
    <a mat-button routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
    <a mat-button routerLink="/generate"  routerLinkActive="active">Generate</a>

    <!-- Account icon opens menu -->
    <button
      mat-icon-button
      [matMenuTriggerFor]="accountMenu"
      aria-label="Account menu">
      <mat-icon>account_circle</mat-icon>
    </button>

    <!-- SOLID menu panel -->
    <mat-menu #accountMenu="matMenu" panelClass="solid-menu">
      <!-- Signed-in user -->
      <button mat-menu-item *ngIf="auth.isAuthed()" (click)="onSignOut()">
        <mat-icon>logout</mat-icon>
        <span>Sign out</span>
      </button>
    </mat-menu>

    <!-- Theme toggle (optional) -->
    <button mat-icon-button *ngIf="theme" (click)="theme.toggle()" aria-label="Toggle theme">
      <mat-icon>{{ theme.isDark() ? 'light_mode' : 'dark_mode' }}</mat-icon>
    </button>
  </ng-container>

  <!-- Guest -->
  <ng-template #guest>
    <a mat-button routerLink="/sign-in" routerLinkActive="active">Sign in</a>
    <a mat-stroked-button routerLink="/sign-up" routerLinkActive="active">Create account</a>
    <button mat-icon-button *ngIf="theme" (click)="theme.toggle()" aria-label="Toggle theme">
      <mat-icon>{{ theme.isDark() ? 'light_mode' : 'dark_mode' }}</mat-icon>
    </button>
  </ng-template>
</mat-toolbar>

<router-outlet />
